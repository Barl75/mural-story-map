<!DOCTYPE html>
<html>
<head>
<title>Search GeoJson Example | Stripped Down</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>

<!--Font Awesome CDN and Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

 <!--leaflet-->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
 <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>

<!-- Leaflet Omnivore Plugin GeoJson KML Etc -->
<script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>

<!--jquery scroller plugin-->
<link href="thumbnail-scroller/jquery.mThumbnailScroller.min.css" rel="stylesheet" />
<script src="thumbnail-scroller/scroller.min.js"></script>

<style>
#map { position:absolute; top:0; bottom:0; width:100%; }
.leaflet-popup-content img {
  max-width:100%;
  }
#thumbs{
  overflow: auto;
  width: 800px;
  height: auto;
  z-index: 700;
}
.content{
	overflow: auto;
	position: relative;
	padding: 10px;
	background-color: #333;
	margin: 20px;
	width: 50%;
	height: auto;
	float: left;
}
.content li{
	margin: 4px;
	overflow: hidden;
}
.content li a{
	display: inline-block;
	border: 7px solid rgba(255,255,255,.1);
}
.content.light, .content.light .mTSButton{ background-color: #c2beb2; }
.content.light li a{ border: 7px solid rgba(255,255,255,.4); }
#content-1, #content-2{
	width: auto;
	height: 600px;
}
#content-1 ul li:first-child{ margin-top: 20px; }
#content-1 ul li:last-child{ margin-bottom: 20px; }
#content-2{ padding: 55px 10px; }
#content-3 .mTSButton{ background-color: #333; }
#content-5{ background-color: #444; }
#content-6{ background-color: transparent; }
#content-6 .mTSButton{
	background-color: rgba(0,0,0,.7);
	-moz-border-radius: 48px; -webkit-border-radius: 48px; border-radius: 48px;
}
#content-6 .mTSButtonLeft{ left: 5px; }
#content-6 .mTSButtonRight{ right: 5px; }
#content-6 {
	background-color: black;
	position: absolute;
	bottom: 0;
	left: 0;
	width: 100%;
	margin: 0;
	height: 200px;
}
</style>


</head>

<body>
<div id="map"></div>
<div id="content-6" class="content">
  <ul id="thumbsList">
    <li><a href="image-1-link"></a></li>
    <li><a href="image-2-link"></a></li>
    <li><a href="image-3-link"></a></li>
    <li><a href="image-4-link"></a></li>
    <!-- and so on... -->
  </ul>
</div>

<script>
	var map = new L.Map('map', {zoom: 13, center: new L.latLng([39.668858, -82.8037639]) });
	
	var OpenStreetMap_BlackAndWhite = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
		maxZoom: 19,
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'
	}).addTo(map);
	
	//CSV LOAD- Features
	var muralLayer = new L.geoJson(null, {
		pointToLayer: function (feature, latlng) {
				return L.circleMarker(latlng, {
					radius: 8,
					fillColor: "#ff7800",
					color: "#000",
					weight: 1,
					opacity: 1,
					fillOpacity: 0.8
				});
		},
		onEachFeature: function (feature, layer) {
			if (feature.properties && feature.properties.Title && feature.properties.Location) {
				var url = feature.properties.Image;
				layer.bindPopup('<img src="' + url + '" style="width:300px;"><br/>' + feature.properties.Title + ' ' + feature.properties.Location, {minWidth: 310,});
    			}
		}
	});
	//layer contain searched elements
	map.addLayer(muralLayer);
	var muraldata = omnivore.csv ('test.csv', null, muralLayer).addTo(map);
	muraldata.on('ready', function() {
		map.fitBounds(muralLayer.getBounds());
		console.log('mural data ready');
		muralLayer.eachLayer(function (layer) {
			var id = layer.feature.id;
			console.log(id);
			$("#content-6").mThumbnailScroller({type:"click-25",/*change to "y" for vertical scroller*/});
      			var url = layer.feature.properties.Image;
      			var id = layer.id;
		  	$("#mTS_1_container").append('<li id="' + id + '" class="mTSThumbContainer"><a href="' + url + '"><img src="' + url + '" class="mTSThumb" /></a></li>');
		});
	});
	
</script>
</body>
</html>
