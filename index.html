<!DOCTYPE html>
<html>
<head>
<title>Search GeoJson Example | Stripped Down</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<!--Font Awesome CDN and Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

 <!--leaflet-->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
 <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>

<!-- Leaflet Omnivore Plugin GeoJson KML Etc -->
<script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>

<style>
#map { position:absolute; top:0; bottom:0; width:100%; }
.leaflet-popup-content img {
  max-width:100%;
  }
</style>


</head>
<body>
<div id="map"></div>

<script>
	var map = new L.Map('map', {zoom: 13, center: new L.latLng([39.668858, -82.8037639]) });
	
	var OpenStreetMap_BlackAndWhite = L.tileLayer('http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
	maxZoom: 19,
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'
}).addTo(map);
	
	//CSV LOAD- Features
	var muralLayer = new L.geoJson(null, {
		pointToLayer: function (feature, latlng) {
				return L.circleMarker(latlng, {
					radius: 8,
					fillColor: "#ff7800",
					color: "#000",
					weight: 1,
					opacity: 1,
					fillOpacity: 0.8
				});
		},
		onEachFeature: function (feature, layer) {
			if (feature.properties && feature.properties.Title && feature.properties.Location) {
				var url = feature.properties.Image;
				layer.bindPopup('<img src="' + url + '" style="width:300px;"><br/>' + feature.properties.Title + ' ' + feature.properties.Location, {minWidth: 310,});
    			}
		}
	});
	//layer contain searched elements
	map.addLayer(muralLayer);
	var muraldata = omnivore.csv ('test.csv', null, muralLayer).addTo(map);
	muraldata.on('ready', function() {
		map.fitBounds(muralLayer.getBounds());
		console.log('mural data ready')
	});
</script>
</body>
</html>
